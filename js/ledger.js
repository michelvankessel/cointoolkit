!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).buffer=t()}}(function(){return function(){return function t(r,e,n){function i(f,u){if(!e[f]){if(!r[f]){var s="function"==typeof require&&require;if(!u&&s)return s(f,!0);if(o)return o(f,!0);var h=new Error("Cannot find module '"+f+"'");throw h.code="MODULE_NOT_FOUND",h}var a=e[f]={exports:{}};r[f][0].call(a.exports,function(t){return i(r[f][1][t]||t)},a,a.exports,t,r,e,n)}return e[f].exports}for(var o="function"==typeof require&&require,f=0;f<n.length;f++)i(n[f]);return i}}()({1:[function(t,r,e){(function(r){"use strict";var n=t("base64-js"),i=t("ieee754");e.Buffer=r,e.SlowBuffer=function(t){+t!=t&&(t=0);return r.alloc(+t)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function f(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=r.prototype,e}function r(t,r,e){if("number"==typeof t){if("string"==typeof r)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return u(t,r,e)}function u(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!r.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|c(t,e),i=f(n),o=i.write(t,e);o!==n&&(i=i.slice(0,o));return i}(t,e);if(ArrayBuffer.isView(t))return a(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(z(t,ArrayBuffer)||t&&z(t.buffer,ArrayBuffer))return function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return i.__proto__=r.prototype,i}(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return r.from(i,e,n);var o=function(t){if(r.isBuffer(t)){var e=0|p(t.length),n=f(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(void 0!==t.length)return"number"!=typeof t.length||D(t.length)?f(0):a(t);if("Buffer"===t.type&&Array.isArray(t.data))return a(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return r.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return s(t),f(t<0?0:0|p(t))}function a(t){for(var r=t.length<0?0:0|p(t.length),e=f(r),n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function c(t,e){if(r.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(t).length;default:if(o)return i?-1:N(t).length;e=(""+e).toLowerCase(),o=!0}}function l(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function y(t,e,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),D(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=r.from(e,i)),r.isBuffer(e))return 0===e.length?-1:g(t,e,n,i,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,i,o);throw new TypeError("val must be string, number or Buffer")}function g(t,r,e,n,i){var o,f=1,u=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;f=2,u/=2,s/=2,e/=2}function h(t,r){return 1===f?t[r]:t.readUInt16BE(r*f)}if(i){var a=-1;for(o=e;o<u;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*f}else-1!==a&&(o-=o-a),a=-1}else for(e+s>u&&(e=u-s),o=e;o>=0;o--){for(var p=!0,c=0;c<s;c++)if(h(t,o+c)!==h(r,c)){p=!1;break}if(p)return o}return-1}function w(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;n>o/2&&(n=o/2);for(var f=0;f<n;++f){var u=parseInt(r.substr(2*f,2),16);if(D(u))return f;t[e+f]=u}return f}function d(t,r,e,n){return j(N(r,t.length-e),t,e,n)}function v(t,r,e,n){return j(function(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}(r),t,e,n)}function b(t,r,e,n){return v(t,r,e,n)}function m(t,r,e,n){return j(P(r),t,e,n)}function E(t,r,e,n){return j(function(t,r){for(var e,n,i,o=[],f=0;f<t.length&&!((r-=2)<0);++f)e=t.charCodeAt(f),n=e>>8,i=e%256,o.push(i),o.push(n);return o}(r,t.length-e),t,e,n)}function A(t,r,e){return 0===r&&e===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(r,e))}function B(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,f,u,s,h=t[i],a=null,p=h>239?4:h>223?3:h>191?2:1;if(i+p<=e)switch(p){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],f=t[i+2],128==(192&o)&&128==(192&f)&&(s=(15&h)<<12|(63&o)<<6|63&f)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],f=t[i+2],u=t[i+3],128==(192&o)&&128==(192&f)&&128==(192&u)&&(s=(15&h)<<18|(63&o)<<12|(63&f)<<6|63&u)>65535&&s<1114112&&(a=s)}null===a?(a=65533,p=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=p}return function(t){var r=t.length;if(r<=U)return String.fromCharCode.apply(String,t);var e="",n=0;for(;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=U));return e}(n)}e.kMaxLength=o,r.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(t,r,e){return u(t,r,e)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(t,r,e){return function(t,r,e){return s(t),t<=0?f(t):void 0!==r?"string"==typeof e?f(t).fill(r,e):f(t).fill(r):f(t)}(t,r,e)},r.allocUnsafe=function(t){return h(t)},r.allocUnsafeSlow=function(t){return h(t)},r.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==r.prototype},r.compare=function(t,e){if(z(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),z(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,i=e.length,o=0,f=Math.min(n,i);o<f;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return r.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=r.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var f=t[n];if(z(f,Uint8Array)&&(f=r.from(f)),!r.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(i,o),o+=f.length}return i},r.byteLength=c,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)l(this,r,r+1);return this},r.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)l(this,r,r+3),l(this,r+1,r+2);return this},r.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)l(this,r,r+7),l(this,r+1,r+6),l(this,r+2,r+5),l(this,r+3,r+4);return this},r.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):function(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,r,e);case"utf8":case"utf-8":return B(this,r,e);case"ascii":return _(this,r,e);case"latin1":case"binary":return T(this,r,e);case"base64":return A(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===r.compare(this,t)},r.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r.prototype.compare=function(t,e,n,i,o){if(z(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var f=(o>>>=0)-(i>>>=0),u=(n>>>=0)-(e>>>=0),s=Math.min(f,u),h=this.slice(i,o),a=t.slice(e,n),p=0;p<s;++p)if(h[p]!==a[p]){f=h[p],u=a[p];break}return f<u?-1:u<f?1:0},r.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},r.prototype.indexOf=function(t,r,e){return y(this,t,r,e,!0)},r.prototype.lastIndexOf=function(t,r,e){return y(this,t,r,e,!1)},r.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(e)?(e>>>=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,r,e);case"utf8":case"utf-8":return d(this,t,r,e);case"ascii":return v(this,t,r,e);case"latin1":case"binary":return b(this,t,r,e);case"base64":return m(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function _(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function I(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=k(t[o]);return i}function S(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function C(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,i,o,f){if(!r.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<f)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function R(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function x(t,r,e,n,o){return r=+r,e>>>=0,o||R(t,0,e,4),i.write(t,r,e,n,23,4),e+4}function M(t,r,e,n,o){return r=+r,e>>>=0,o||R(t,0,e,8),i.write(t,r,e,n,52,8),e+8}r.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var i=this.subarray(t,e);return i.__proto__=r.prototype,i},r.prototype.readUIntLE=function(t,r,e){t>>>=0,r>>>=0,e||C(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},r.prototype.readUIntBE=function(t,r,e){t>>>=0,r>>>=0,e||C(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},r.prototype.readUInt8=function(t,r){return t>>>=0,r||C(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,r){return t>>>=0,r||C(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,r){return t>>>=0,r||C(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,r){return t>>>=0,r||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,r){return t>>>=0,r||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,r,e){t>>>=0,r>>>=0,e||C(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},r.prototype.readIntBE=function(t,r,e){t>>>=0,r>>>=0,e||C(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},r.prototype.readInt8=function(t,r){return t>>>=0,r||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,r){t>>>=0,r||C(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},r.prototype.readInt16BE=function(t,r){t>>>=0,r||C(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},r.prototype.readInt32LE=function(t,r){return t>>>=0,r||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,r){return t>>>=0,r||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,r){return t>>>=0,r||C(t,4,this.length),i.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,r){return t>>>=0,r||C(t,4,this.length),i.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,r){return t>>>=0,r||C(t,8,this.length),i.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,r){return t>>>=0,r||C(t,8,this.length),i.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r>>>=0,e>>>=0,n)||L(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},r.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r>>>=0,e>>>=0,n)||L(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},r.prototype.writeUInt8=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,1,255,0),this[r]=255&t,r+1},r.prototype.writeUInt16LE=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,2,65535,0),this[r]=255&t,this[r+1]=t>>>8,r+2},r.prototype.writeUInt16BE=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=255&t,r+2},r.prototype.writeUInt32LE=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t,r+4},r.prototype.writeUInt32BE=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},r.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r>>>=0,!n){var i=Math.pow(2,8*e-1);L(this,t,r,e,i-1,-i)}var o=0,f=1,u=0;for(this[r]=255&t;++o<e&&(f*=256);)t<0&&0===u&&0!==this[r+o-1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},r.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r>>>=0,!n){var i=Math.pow(2,8*e-1);L(this,t,r,e,i-1,-i)}var o=e-1,f=1,u=0;for(this[r+o]=255&t;--o>=0&&(f*=256);)t<0&&0===u&&0!==this[r+o+1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},r.prototype.writeInt8=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=255&t,r+1},r.prototype.writeInt16LE=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,2,32767,-32768),this[r]=255&t,this[r+1]=t>>>8,r+2},r.prototype.writeInt16BE=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=255&t,r+2},r.prototype.writeInt32LE=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,4,2147483647,-2147483648),this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4},r.prototype.writeInt32BE=function(t,r,e){return t=+t,r>>>=0,e||L(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},r.prototype.writeFloatLE=function(t,r,e){return x(this,t,r,!0,e)},r.prototype.writeFloatBE=function(t,r,e){return x(this,t,r,!1,e)},r.prototype.writeDoubleLE=function(t,r,e){return M(this,t,r,!0,e)},r.prototype.writeDoubleBE=function(t,r,e){return M(this,t,r,!1,e)},r.prototype.copy=function(t,e,n,i){if(!r.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,i);else if(this===t&&n<e&&e<i)for(var f=o-1;f>=0;--f)t[f+e]=this[f+n];else Uint8Array.prototype.set.call(t,this.subarray(n,i),e);return o},r.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var o=t.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(t=o)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var f;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(f=e;f<n;++f)this[f]=t;else{var u=r.isBuffer(t)?t:r.from(t,i),s=u.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(f=0;f<n-e;++f)this[f+e]=u[f%s]}return this};var O=/[^+\/0-9A-Za-z-_]/g;function k(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],f=0;f<n;++f){if((e=t.charCodeAt(f))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(f+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function P(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function j(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function z(t,r){return t instanceof r||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===r.name}function D(t){return t!=t}}).call(this,t("buffer").Buffer)},{"base64-js":2,buffer:5,ieee754:3}],2:[function(t,r,e){"use strict";e.byteLength=function(t){var r=h(t),e=r[0],n=r[1];return 3*(e+n)/4-n},e.toByteArray=function(t){for(var r,e=h(t),n=e[0],f=e[1],u=new o(function(t,r,e){return 3*(r+e)/4-e}(0,n,f)),s=0,a=f>0?n-4:n,p=0;p<a;p+=4)r=i[t.charCodeAt(p)]<<18|i[t.charCodeAt(p+1)]<<12|i[t.charCodeAt(p+2)]<<6|i[t.charCodeAt(p+3)],u[s++]=r>>16&255,u[s++]=r>>8&255,u[s++]=255&r;2===f&&(r=i[t.charCodeAt(p)]<<2|i[t.charCodeAt(p+1)]>>4,u[s++]=255&r);1===f&&(r=i[t.charCodeAt(p)]<<10|i[t.charCodeAt(p+1)]<<4|i[t.charCodeAt(p+2)]>>2,u[s++]=r>>8&255,u[s++]=255&r);return u},e.fromByteArray=function(t){for(var r,e=t.length,i=e%3,o=[],f=0,u=e-i;f<u;f+=16383)o.push(a(t,f,f+16383>u?u:f+16383));1===i?(r=t[e-1],o.push(n[r>>2]+n[r<<4&63]+"==")):2===i&&(r=(t[e-2]<<8)+t[e-1],o.push(n[r>>10]+n[r>>4&63]+n[r<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=f.length;u<s;++u)n[u]=f[u],i[f.charCodeAt(u)]=u;function h(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=r),[e,e===r?0:4-e%4]}function a(t,r,e){for(var i,o,f=[],u=r;u<e;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),f.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return f.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],3:[function(t,r,e){e.read=function(t,r,e,n,i){var o,f,u=8*i-n-1,s=(1<<u)-1,h=s>>1,a=-7,p=e?i-1:0,c=e?-1:1,l=t[r+p];for(p+=c,o=l&(1<<-a)-1,l>>=-a,a+=u;a>0;o=256*o+t[r+p],p+=c,a-=8);for(f=o&(1<<-a)-1,o>>=-a,a+=n;a>0;f=256*f+t[r+p],p+=c,a-=8);if(0===o)o=1-h;else{if(o===s)return f?NaN:1/0*(l?-1:1);f+=Math.pow(2,n),o-=h}return(l?-1:1)*f*Math.pow(2,o-n)},e.write=function(t,r,e,n,i,o){var f,u,s,h=8*o-i-1,a=(1<<h)-1,p=a>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:o-1,y=n?1:-1,g=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,f=a):(f=Math.floor(Math.log(r)/Math.LN2),r*(s=Math.pow(2,-f))<1&&(f--,s*=2),(r+=f+p>=1?c/s:c*Math.pow(2,1-p))*s>=2&&(f++,s/=2),f+p>=a?(u=0,f=a):f+p>=1?(u=(r*s-1)*Math.pow(2,i),f+=p):(u=r*Math.pow(2,p-1)*Math.pow(2,i),f=0));i>=8;t[e+l]=255&u,l+=y,u/=256,i-=8);for(f=f<<i|u,h+=i;h>0;t[e+l]=255&f,l+=y,f/=256,h-=8);t[e+l-y]|=128*g}},{}],4:[function(t,r,e){arguments[4][2][0].apply(e,arguments)},{dup:2}],5:[function(t,r,e){arguments[4][1][0].apply(e,arguments)},{"base64-js":4,buffer:5,dup:1,ieee754:6}],6:[function(t,r,e){arguments[4][3][0].apply(e,arguments)},{dup:3}]},{},[1])(1)});
window.global = window;
window.Buffer = buffer.Buffer;

!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@ledgerhq/hw-app-btc")):"function"==typeof define&&define.amd?define(["exports","@ledgerhq/hw-app-btc"],r):r(e.NewLedger={},e.hwAppBtc)}(this,(function(e,r){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,r){return e(r={exports:{}},r.exports),r.exports}var a;o((function(e){var r=function(e){var r,t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function c(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{c({},"")}catch(e){c=function(e,r,t){return e[r]=t}}function u(e,r,t,n){var o=r&&r.prototype instanceof g?r:g,a=Object.create(o.prototype),s=new T(n||[]);return a._invoke=function(e,r,t){var n=d;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw a;return _()}for(t.method=o,t.arg=a;;){var s=t.delegate;if(s){var i=I(s,t);if(i){if(i===v)continue;return i}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(n===d)throw n=h,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);n=f;var c=l(e,r,t);if("normal"===c.type){if(n=t.done?h:p,c.arg===v)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(n=h,t.method="throw",t.arg=c.arg)}}}(e,t,s),a}function l(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",v={};function g(){}function m(){}function E(){}var C={};c(C,a,(function(){return this}));var y=Object.getPrototypeOf,w=y&&y(y(L([])));w&&w!==t&&n.call(w,a)&&(C=w);var b=E.prototype=g.prototype=Object.create(C);function D(e){["next","throw","return"].forEach((function(r){c(e,r,(function(e){return this._invoke(r,e)}))}))}function A(e,r){function t(o,a,s,i){var c=l(e[o],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?r.resolve(d.__await).then((function(e){t("next",e,s,i)}),(function(e){t("throw",e,s,i)})):r.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return t("throw",e,s,i)}))}i(c.arg)}var o;this._invoke=function(e,n){function a(){return new r((function(r,o){t(e,n,r,o)}))}return o=o?o.then(a,a):a()}}function I(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,I(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,v;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,v):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function S(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function N(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return s.next=s}}return{next:_}}function _(){return{value:r,done:!0}}return m.prototype=E,c(b,"constructor",E),c(E,"constructor",m),m.displayName=c(E,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},D(A.prototype),c(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(r,t,n,o,a){void 0===a&&(a=Promise);var s=new A(u(r,t,n,o),a);return e.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},D(b),c(b,i,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var r=[];for(var t in e)r.push(t);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return i.type="throw",i.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=r,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(s)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),v},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),N(t),v}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var o=n.arg;N(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),v}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}));function s(){}function i(){i.init.call(this)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,r,t){if(r)e.call(t);else for(var n=e.length,o=m(e,n),a=0;a<n;++a)o[a].call(t)}function l(e,r,t,n){if(r)e.call(t,n);else for(var o=e.length,a=m(e,o),s=0;s<o;++s)a[s].call(t,n)}function d(e,r,t,n,o){if(r)e.call(t,n,o);else for(var a=e.length,s=m(e,a),i=0;i<a;++i)s[i].call(t,n,o)}function p(e,r,t,n,o,a){if(r)e.call(t,n,o,a);else for(var s=e.length,i=m(e,s),c=0;c<s;++c)i[c].call(t,n,o,a)}function f(e,r,t,n){if(r)e.apply(t,n);else for(var o=e.length,a=m(e,o),s=0;s<o;++s)a[s].apply(t,n)}function h(e,r,t,n){var o,a,i,u;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",r,t.listener?t.listener:t),a=e._events),i=a[r]):(a=e._events=new s,e._eventsCount=0),i){if("function"==typeof i?i=a[r]=n?[t,i]:[i,t]:n?i.unshift(t):i.push(t),!i.warned&&(o=c(e))&&o>0&&i.length>o){i.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+r+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=r,l.count=i.length,u=l,"function"==typeof console.warn?console.warn(u):console.log(u)}}else i=a[r]=t,++e._eventsCount;return e}function v(e,r,t){var n=!1;function o(){e.removeListener(r,o),n||(n=!0,t.apply(e,arguments))}return o.listener=t,o}function g(e){var r=this._events;if(r){var t=r[e];if("function"==typeof t)return 1;if(t)return t.length}return 0}function m(e,r){for(var t=new Array(r);r--;)t[r]=e[r];return t}s.prototype=Object.create(null),i.EventEmitter=i,i.usingDomains=!1,i.prototype.domain=void 0,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.init=function(){this.domain=null,i.usingDomains&&a.active&&a.Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new s,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){var r,t,n,o,a,s,i,c="error"===e;if(s=this._events)c=c&&null==s.error;else if(!c)return!1;if(i=this.domain,c){if(r=arguments[1],!i){if(r instanceof Error)throw r;var h=new Error('Uncaught, unspecified "error" event. ('+r+")");throw h.context=r,h}return r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=i,r.domainThrown=!1,i.emit("error",r),!1}if(!(t=s[e]))return!1;var v="function"==typeof t;switch(n=arguments.length){case 1:u(t,v,this);break;case 2:l(t,v,this,arguments[1]);break;case 3:d(t,v,this,arguments[1],arguments[2]);break;case 4:p(t,v,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(n-1),a=1;a<n;a++)o[a-1]=arguments[a];f(t,v,this,o)}return!0},i.prototype.addListener=function(e,r){return h(this,e,r,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,r){return h(this,e,r,!0)},i.prototype.once=function(e,r){if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');return this.on(e,v(this,e,r)),this},i.prototype.prependOnceListener=function(e,r){if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,v(this,e,r)),this},i.prototype.removeListener=function(e,r){var t,n,o,a,i;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(t=n[e]))return this;if(t===r||t.listener&&t.listener===r)0==--this._eventsCount?this._events=new s:(delete n[e],n.removeListener&&this.emit("removeListener",e,t.listener||r));else if("function"!=typeof t){for(o=-1,a=t.length;a-- >0;)if(t[a]===r||t[a].listener&&t[a].listener===r){i=t[a].listener,o=a;break}if(o<0)return this;if(1===t.length){if(t[0]=void 0,0==--this._eventsCount)return this._events=new s,this;delete n[e]}else!function(e,r){for(var t=r,n=t+1,o=e.length;n<o;t+=1,n+=1)e[t]=e[n];e.pop()}(t,o);n.removeListener&&this.emit("removeListener",e,i||r)}return this},i.prototype.removeAllListeners=function(e){var r,t;if(!(t=this._events))return this;if(!t.removeListener)return 0===arguments.length?(this._events=new s,this._eventsCount=0):t[e]&&(0==--this._eventsCount?this._events=new s:delete t[e]),this;if(0===arguments.length){for(var n,o=Object.keys(t),a=0;a<o.length;++a)"removeListener"!==(n=o[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new s,this._eventsCount=0,this}if("function"==typeof(r=t[e]))this.removeListener(e,r);else if(r)do{this.removeListener(e,r[r.length-1])}while(r[0]);return this},i.prototype.listeners=function(e){var r,t=this._events;return t&&(r=t[e])?"function"==typeof r?[r.listener||r]:function(e){for(var r=new Array(e.length),t=0;t<r.length;++t)r[t]=e[t].listener||e[t];return r}(r):[]},i.listenerCount=function(e,r){return"function"==typeof e.listenerCount?e.listenerCount(r):g.call(e,r)},i.prototype.listenerCount=g,i.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var E=o((function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={},o={},a=(r.addCustomErrorDeserializer=function(e,r){o[e]=r},r.createCustomErrorClass=function(e){var r=function(r,t){Object.assign(this,t),this.name=e,this.message=r||e,this.stack=(new Error).stack};return r.prototype=new Error,n[e]=r,r});r.deserializeError=function e(r){if("object"===(void 0===r?"undefined":t(r))&&r){try{var s=JSON.parse(r.message);s.message&&s.name&&(r=s)}catch(e){}var i=void 0;if("string"==typeof r.name){var c=r.name,u=o[c];if(u)i=u(r);else{var l="Error"===c?Error:n[c];l||(console.warn("deserializing an unknown class '"+c+"'"),l=a(c)),i=Object.create(l.prototype);try{for(var d in r)r.hasOwnProperty(d)&&(i[d]=r[d])}catch(e){}}}else i=new Error(r.message);return!i.stack&&Error.captureStackTrace&&Error.captureStackTrace(i,e),i}return new Error(String(r))},r.serializeError=function(e){return e?"object"===(void 0===e?"undefined":t(e))?s(e,[]):"function"==typeof e?"[Function: "+(e.name||"anonymous")+"]":e:e};function s(e,r){var n={};r.push(e);var o=!0,a=!1,i=void 0;try{for(var c,u=Object.keys(e)[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value,d=e[l];"function"!=typeof d&&(d&&"object"===(void 0===d?"undefined":t(d))?-1!==r.indexOf(e[l])?n[l]="[Circular]":n[l]=s(e[l],r.slice(0)):n[l]=d)}}catch(e){a=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}return"string"==typeof e.name&&(n.name=e.name),"string"==typeof e.message&&(n.message=e.message),"string"==typeof e.stack&&(n.stack=e.stack),n}}));n(E);E.addCustomErrorDeserializer,E.createCustomErrorClass,E.deserializeError,E.serializeError;var C=o((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.StatusCodes=r.DBNotReset=r.DBWrongPassword=r.NoDBPathGiven=r.FirmwareOrAppUpdateRequired=r.LedgerAPI5xx=r.LedgerAPI4xx=r.GenuineCheckFailed=r.PairingFailed=r.SyncError=r.FeeTooHigh=r.FeeRequired=r.FeeNotLoaded=r.CantScanQRCode=r.ETHAddressNonEIP=r.WrongAppForCurrency=r.WrongDeviceForAccount=r.WebsocketConnectionFailed=r.WebsocketConnectionError=r.DeviceShouldStayInApp=r.TransportWebUSBGestureRequired=r.TransportInterfaceNotAvailable=r.TransportOpenUserCancelled=r.UserRefusedOnDevice=r.UserRefusedAllowManager=r.UserRefusedFirmwareUpdate=r.UserRefusedAddress=r.UserRefusedDeviceNameChange=r.UpdateYourApp=r.UnavailableTezosOriginatedAccountSend=r.UnavailableTezosOriginatedAccountReceive=r.RecipientRequired=r.MCUNotGenuineToDashboard=r.UnexpectedBootloader=r.TimeoutTagged=r.RecommendUndelegation=r.RecommendSubAccountsToEmpty=r.PasswordIncorrectError=r.PasswordsDontMatchError=r.GasLessThanEstimate=r.NotSupportedLegacyAddress=r.NotEnoughGas=r.NoAccessToCamera=r.NotEnoughBalanceBecauseDestinationNotCreated=r.NotEnoughSpendableBalance=r.NotEnoughBalanceInParentAccount=r.NotEnoughBalanceToDelegate=r.NotEnoughBalance=r.NoAddressesFound=r.NetworkDown=r.ManagerUninstallBTCDep=r.ManagerNotEnoughSpaceError=r.ManagerFirmwareNotEnoughSpaceError=r.ManagerDeviceLockedError=r.ManagerAppDepUninstallRequired=r.ManagerAppDepInstallRequired=r.ManagerAppRelyOnBTCError=r.ManagerAppAlreadyInstalledError=r.LedgerAPINotAvailable=r.LedgerAPIErrorWithMessage=r.LedgerAPIError=r.UnknownMCU=r.LatestMCUInstalledError=r.InvalidAddressBecauseDestinationIsAlsoSource=r.InvalidAddress=r.InvalidXRPTag=r.HardResetFail=r.FeeEstimationFailed=r.EthAppPleaseEnableContractData=r.EnpointConfigError=r.DisconnectedDeviceDuringOperation=r.DisconnectedDevice=r.DeviceSocketNoBulkStatus=r.DeviceSocketFail=r.DeviceNameInvalid=r.DeviceHalted=r.DeviceInOSUExpected=r.DeviceOnDashboardUnexpected=r.DeviceOnDashboardExpected=r.DeviceNotGenuineError=r.DeviceGenuineSocketEarlyClose=r.DeviceAppVerifyNotSupported=r.CurrencyNotSupported=r.CashAddrNotSupported=r.CantOpenDevice=r.BtcUnmatchedApp=r.BluetoothRequired=r.AmountRequired=r.AccountNotSupported=r.AccountNameRequiredError=r.addCustomErrorDeserializer=r.createCustomErrorClass=r.deserializeError=r.serializeError=void 0,r.TransportError=t,r.getAltStatusMessage=o,r.TransportStatusError=a,r.serializeError=E.serializeError,r.deserializeError=E.deserializeError,r.createCustomErrorClass=E.createCustomErrorClass,r.addCustomErrorDeserializer=E.addCustomErrorDeserializer;r.AccountNameRequiredError=(0,E.createCustomErrorClass)("AccountNameRequired"),r.AccountNotSupported=(0,E.createCustomErrorClass)("AccountNotSupported"),r.AmountRequired=(0,E.createCustomErrorClass)("AmountRequired"),r.BluetoothRequired=(0,E.createCustomErrorClass)("BluetoothRequired"),r.BtcUnmatchedApp=(0,E.createCustomErrorClass)("BtcUnmatchedApp"),r.CantOpenDevice=(0,E.createCustomErrorClass)("CantOpenDevice"),r.CashAddrNotSupported=(0,E.createCustomErrorClass)("CashAddrNotSupported"),r.CurrencyNotSupported=(0,E.createCustomErrorClass)("CurrencyNotSupported"),r.DeviceAppVerifyNotSupported=(0,E.createCustomErrorClass)("DeviceAppVerifyNotSupported"),r.DeviceGenuineSocketEarlyClose=(0,E.createCustomErrorClass)("DeviceGenuineSocketEarlyClose"),r.DeviceNotGenuineError=(0,E.createCustomErrorClass)("DeviceNotGenuine"),r.DeviceOnDashboardExpected=(0,E.createCustomErrorClass)("DeviceOnDashboardExpected"),r.DeviceOnDashboardUnexpected=(0,E.createCustomErrorClass)("DeviceOnDashboardUnexpected"),r.DeviceInOSUExpected=(0,E.createCustomErrorClass)("DeviceInOSUExpected"),r.DeviceHalted=(0,E.createCustomErrorClass)("DeviceHalted"),r.DeviceNameInvalid=(0,E.createCustomErrorClass)("DeviceNameInvalid"),r.DeviceSocketFail=(0,E.createCustomErrorClass)("DeviceSocketFail"),r.DeviceSocketNoBulkStatus=(0,E.createCustomErrorClass)("DeviceSocketNoBulkStatus"),r.DisconnectedDevice=(0,E.createCustomErrorClass)("DisconnectedDevice"),r.DisconnectedDeviceDuringOperation=(0,E.createCustomErrorClass)("DisconnectedDeviceDuringOperation"),r.EnpointConfigError=(0,E.createCustomErrorClass)("EnpointConfig"),r.EthAppPleaseEnableContractData=(0,E.createCustomErrorClass)("EthAppPleaseEnableContractData"),r.FeeEstimationFailed=(0,E.createCustomErrorClass)("FeeEstimationFailed"),r.HardResetFail=(0,E.createCustomErrorClass)("HardResetFail"),r.InvalidXRPTag=(0,E.createCustomErrorClass)("InvalidXRPTag"),r.InvalidAddress=(0,E.createCustomErrorClass)("InvalidAddress"),r.InvalidAddressBecauseDestinationIsAlsoSource=(0,E.createCustomErrorClass)("InvalidAddressBecauseDestinationIsAlsoSource"),r.LatestMCUInstalledError=(0,E.createCustomErrorClass)("LatestMCUInstalledError"),r.UnknownMCU=(0,E.createCustomErrorClass)("UnknownMCU"),r.LedgerAPIError=(0,E.createCustomErrorClass)("LedgerAPIError"),r.LedgerAPIErrorWithMessage=(0,E.createCustomErrorClass)("LedgerAPIErrorWithMessage"),r.LedgerAPINotAvailable=(0,E.createCustomErrorClass)("LedgerAPINotAvailable"),r.ManagerAppAlreadyInstalledError=(0,E.createCustomErrorClass)("ManagerAppAlreadyInstalled"),r.ManagerAppRelyOnBTCError=(0,E.createCustomErrorClass)("ManagerAppRelyOnBTC"),r.ManagerAppDepInstallRequired=(0,E.createCustomErrorClass)("ManagerAppDepInstallRequired"),r.ManagerAppDepUninstallRequired=(0,E.createCustomErrorClass)("ManagerAppDepUninstallRequired"),r.ManagerDeviceLockedError=(0,E.createCustomErrorClass)("ManagerDeviceLocked"),r.ManagerFirmwareNotEnoughSpaceError=(0,E.createCustomErrorClass)("ManagerFirmwareNotEnoughSpace"),r.ManagerNotEnoughSpaceError=(0,E.createCustomErrorClass)("ManagerNotEnoughSpace"),r.ManagerUninstallBTCDep=(0,E.createCustomErrorClass)("ManagerUninstallBTCDep"),r.NetworkDown=(0,E.createCustomErrorClass)("NetworkDown"),r.NoAddressesFound=(0,E.createCustomErrorClass)("NoAddressesFound"),r.NotEnoughBalance=(0,E.createCustomErrorClass)("NotEnoughBalance"),r.NotEnoughBalanceToDelegate=(0,E.createCustomErrorClass)("NotEnoughBalanceToDelegate"),r.NotEnoughBalanceInParentAccount=(0,E.createCustomErrorClass)("NotEnoughBalanceInParentAccount"),r.NotEnoughSpendableBalance=(0,E.createCustomErrorClass)("NotEnoughSpendableBalance"),r.NotEnoughBalanceBecauseDestinationNotCreated=(0,E.createCustomErrorClass)("NotEnoughBalanceBecauseDestinationNotCreated"),r.NoAccessToCamera=(0,E.createCustomErrorClass)("NoAccessToCamera"),r.NotEnoughGas=(0,E.createCustomErrorClass)("NotEnoughGas"),r.NotSupportedLegacyAddress=(0,E.createCustomErrorClass)("NotSupportedLegacyAddress"),r.GasLessThanEstimate=(0,E.createCustomErrorClass)("GasLessThanEstimate"),r.PasswordsDontMatchError=(0,E.createCustomErrorClass)("PasswordsDontMatch"),r.PasswordIncorrectError=(0,E.createCustomErrorClass)("PasswordIncorrect"),r.RecommendSubAccountsToEmpty=(0,E.createCustomErrorClass)("RecommendSubAccountsToEmpty"),r.RecommendUndelegation=(0,E.createCustomErrorClass)("RecommendUndelegation"),r.TimeoutTagged=(0,E.createCustomErrorClass)("TimeoutTagged"),r.UnexpectedBootloader=(0,E.createCustomErrorClass)("UnexpectedBootloader"),r.MCUNotGenuineToDashboard=(0,E.createCustomErrorClass)("MCUNotGenuineToDashboard"),r.RecipientRequired=(0,E.createCustomErrorClass)("RecipientRequired"),r.UnavailableTezosOriginatedAccountReceive=(0,E.createCustomErrorClass)("UnavailableTezosOriginatedAccountReceive"),r.UnavailableTezosOriginatedAccountSend=(0,E.createCustomErrorClass)("UnavailableTezosOriginatedAccountSend"),r.UpdateYourApp=(0,E.createCustomErrorClass)("UpdateYourApp"),r.UserRefusedDeviceNameChange=(0,E.createCustomErrorClass)("UserRefusedDeviceNameChange"),r.UserRefusedAddress=(0,E.createCustomErrorClass)("UserRefusedAddress"),r.UserRefusedFirmwareUpdate=(0,E.createCustomErrorClass)("UserRefusedFirmwareUpdate"),r.UserRefusedAllowManager=(0,E.createCustomErrorClass)("UserRefusedAllowManager"),r.UserRefusedOnDevice=(0,E.createCustomErrorClass)("UserRefusedOnDevice"),r.TransportOpenUserCancelled=(0,E.createCustomErrorClass)("TransportOpenUserCancelled"),r.TransportInterfaceNotAvailable=(0,E.createCustomErrorClass)("TransportInterfaceNotAvailable"),r.TransportWebUSBGestureRequired=(0,E.createCustomErrorClass)("TransportWebUSBGestureRequired"),r.DeviceShouldStayInApp=(0,E.createCustomErrorClass)("DeviceShouldStayInApp"),r.WebsocketConnectionError=(0,E.createCustomErrorClass)("WebsocketConnectionError"),r.WebsocketConnectionFailed=(0,E.createCustomErrorClass)("WebsocketConnectionFailed"),r.WrongDeviceForAccount=(0,E.createCustomErrorClass)("WrongDeviceForAccount"),r.WrongAppForCurrency=(0,E.createCustomErrorClass)("WrongAppForCurrency"),r.ETHAddressNonEIP=(0,E.createCustomErrorClass)("ETHAddressNonEIP"),r.CantScanQRCode=(0,E.createCustomErrorClass)("CantScanQRCode"),r.FeeNotLoaded=(0,E.createCustomErrorClass)("FeeNotLoaded"),r.FeeRequired=(0,E.createCustomErrorClass)("FeeRequired"),r.FeeTooHigh=(0,E.createCustomErrorClass)("FeeTooHigh"),r.SyncError=(0,E.createCustomErrorClass)("SyncError"),r.PairingFailed=(0,E.createCustomErrorClass)("PairingFailed"),r.GenuineCheckFailed=(0,E.createCustomErrorClass)("GenuineCheckFailed"),r.LedgerAPI4xx=(0,E.createCustomErrorClass)("LedgerAPI4xx"),r.LedgerAPI5xx=(0,E.createCustomErrorClass)("LedgerAPI5xx"),r.FirmwareOrAppUpdateRequired=(0,E.createCustomErrorClass)("FirmwareOrAppUpdateRequired"),r.NoDBPathGiven=(0,E.createCustomErrorClass)("NoDBPathGiven"),r.DBWrongPassword=(0,E.createCustomErrorClass)("DBWrongPassword"),r.DBNotReset=(0,E.createCustomErrorClass)("DBNotReset");function t(e,r){this.name="TransportError",this.message=e,this.stack=(new Error).stack,this.id=r}t.prototype=new Error,(0,E.addCustomErrorDeserializer)("TransportError",(function(e){return new t(e.message,e.id)}));var n=r.StatusCodes={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function o(e){switch(e){case 26368:return"Incorrect length";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=e&&e<=28671)return"Internal error, please report"}function a(e){this.name="TransportStatusError";var r=Object.keys(n).find((function(r){return n[r]===e}))||"UNKNOWN_ERROR",t=o(e)||r,a=e.toString(16);this.message="Ledger device: "+t+" (0x"+a+")",this.stack=(new Error).stack,this.statusCode=e,this.statusText=r}a.prototype=new Error,(0,E.addCustomErrorDeserializer)("TransportStatusError",(function(e){return new a(e.statusCode)}))}));n(C);C.StatusCodes,C.DBNotReset,C.DBWrongPassword,C.NoDBPathGiven,C.FirmwareOrAppUpdateRequired,C.LedgerAPI5xx,C.LedgerAPI4xx,C.GenuineCheckFailed,C.PairingFailed,C.SyncError,C.FeeTooHigh,C.FeeRequired,C.FeeNotLoaded,C.CantScanQRCode,C.ETHAddressNonEIP,C.WrongAppForCurrency,C.WrongDeviceForAccount,C.WebsocketConnectionFailed,C.WebsocketConnectionError,C.DeviceShouldStayInApp,C.TransportWebUSBGestureRequired,C.TransportInterfaceNotAvailable,C.TransportOpenUserCancelled,C.UserRefusedOnDevice,C.UserRefusedAllowManager,C.UserRefusedFirmwareUpdate,C.UserRefusedAddress,C.UserRefusedDeviceNameChange,C.UpdateYourApp,C.UnavailableTezosOriginatedAccountSend,C.UnavailableTezosOriginatedAccountReceive,C.RecipientRequired,C.MCUNotGenuineToDashboard,C.UnexpectedBootloader,C.TimeoutTagged,C.RecommendUndelegation,C.RecommendSubAccountsToEmpty,C.PasswordIncorrectError,C.PasswordsDontMatchError,C.GasLessThanEstimate,C.NotSupportedLegacyAddress,C.NotEnoughGas,C.NoAccessToCamera,C.NotEnoughBalanceBecauseDestinationNotCreated,C.NotEnoughSpendableBalance,C.NotEnoughBalanceInParentAccount,C.NotEnoughBalanceToDelegate,C.NotEnoughBalance,C.NoAddressesFound,C.NetworkDown,C.ManagerUninstallBTCDep,C.ManagerNotEnoughSpaceError,C.ManagerFirmwareNotEnoughSpaceError,C.ManagerDeviceLockedError,C.ManagerAppDepUninstallRequired,C.ManagerAppDepInstallRequired,C.ManagerAppRelyOnBTCError,C.ManagerAppAlreadyInstalledError,C.LedgerAPINotAvailable,C.LedgerAPIErrorWithMessage,C.LedgerAPIError,C.UnknownMCU,C.LatestMCUInstalledError,C.InvalidAddressBecauseDestinationIsAlsoSource,C.InvalidAddress,C.InvalidXRPTag,C.HardResetFail,C.FeeEstimationFailed,C.EthAppPleaseEnableContractData,C.EnpointConfigError,C.DisconnectedDeviceDuringOperation,C.DisconnectedDevice,C.DeviceSocketNoBulkStatus,C.DeviceSocketFail,C.DeviceNameInvalid,C.DeviceHalted,C.DeviceInOSUExpected,C.DeviceOnDashboardUnexpected,C.DeviceOnDashboardExpected,C.DeviceNotGenuineError,C.DeviceGenuineSocketEarlyClose,C.DeviceAppVerifyNotSupported,C.CurrencyNotSupported,C.CashAddrNotSupported,C.CantOpenDevice,C.BtcUnmatchedApp,C.BluetoothRequired,C.AmountRequired,C.AccountNotSupported,C.AccountNameRequiredError,C.addCustomErrorDeserializer,C.createCustomErrorClass,C.deserializeError,C.serializeError,C.TransportError,C.getAltStatusMessage,C.TransportStatusError;var y=o((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getAltStatusMessage=r.StatusCodes=r.TransportStatusError=r.TransportError=void 0;var t,n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=(t=i)&&t.__esModule?t:{default:t};function a(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function s(e){return function(){var r=e.apply(this,arguments);return new Promise((function(e,t){return function n(o,a){try{var s=r[o](a),i=s.value}catch(e){return void t(e)}if(!s.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(i)}("next")}))}}r.TransportError=C.TransportError,r.TransportStatusError=C.TransportStatusError,r.StatusCodes=C.StatusCodes,r.getAltStatusMessage=C.getAltStatusMessage;var c=function(){function e(){var r,t,n=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.exchangeTimeout=3e4,this._events=new o.default,this.send=(r=s(regeneratorRuntime.mark((function e(r,t,o,a){var s,i,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Buffer.alloc(0),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[C.StatusCodes.OK];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>=256)){e.next=2;break}throw new C.TransportError("data.length exceed 256 bytes limit. Got: "+c.length,"DataLengthTooBig");case 2:return e.next=4,n.exchange(Buffer.concat([Buffer.from([r,t,o,a]),Buffer.from([c.length]),c]));case 4:if(s=e.sent,i=s.readUInt16BE(s.length-2),u.some((function(e){return e===i}))){e.next=8;break}throw new C.TransportStatusError(i);case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,n)}))),function(e,t,n,o){return r.apply(this,arguments)}),this.exchangeAtomicImpl=(t=s(regeneratorRuntime.mark((function e(r){var t,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.exchangeBusyPromise){e.next=2;break}throw new C.TransportError("Transport race condition","RaceCondition");case 2:return t=void 0,o=new Promise((function(e){t=e})),n.exchangeBusyPromise=o,e.prev=5,e.next=8,r();case 8:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,t&&t(),n.exchangeBusyPromise=null,e.finish(10);case 14:case"end":return e.stop()}}),e,n,[[5,,10,14]])}))),function(e){return t.apply(this,arguments)}),this._appAPIlock=null}return n(e,[{key:"on",value:function(e,r){this._events.on(e,r)}},{key:"off",value:function(e,r){this._events.removeListener(e,r)}},{key:"emit",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];(r=this._events).emit.apply(r,[e].concat(a(n)))}},{key:"setDebugMode",value:function(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}},{key:"setExchangeTimeout",value:function(e){this.exchangeTimeout=e}},{key:"decorateAppAPIMethods",value:function(e,r,t){var n=!0,o=!1,a=void 0;try{for(var s,i=r[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var c=s.value;e[c]=this.decorateAppAPIMethod(c,e[c],e,t)}}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}}},{key:"decorateAppAPIMethod",value:function(e,r,t,n){var o,a=this;return o=s(regeneratorRuntime.mark((function o(){for(var s=arguments.length,i=Array(s),c=0;c<s;c++)i[c]=arguments[c];var u;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(u=a._appAPIlock)){o.next=3;break}return o.abrupt("return",Promise.reject(new C.TransportError("Ledger Device is busy (lock "+u+")","TransportLocked")));case 3:return o.prev=3,a._appAPIlock=e,a.setScrambleKey(n),o.next=8,r.apply(t,i);case 8:return o.abrupt("return",o.sent);case 9:return o.prev=9,a._appAPIlock=null,o.finish(9);case 12:case"end":return o.stop()}}),o,a,[[3,,9,12]])}))),function(){return o.apply(this,arguments)}}}],[{key:"create",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments[1];return new Promise((function(n,o){var a=!1,s=e.listen({next:function(t){a=!0,s&&s.unsubscribe(),i&&clearTimeout(i),e.open(t.descriptor,r).then(n,o)},error:function(e){i&&clearTimeout(i),o(e)},complete:function(){i&&clearTimeout(i),a||o(new C.TransportError(e.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),i=t?setTimeout((function(){s.unsubscribe(),o(new C.TransportError(e.ErrorMessage_ListenTimeout,"ListenTimeout"))}),t):null}))}}]),e}();c.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",c.ErrorMessage_NoDeviceFound="No Ledger device found",r.default=c}));n(y);y.getAltStatusMessage,y.StatusCodes,y.TransportStatusError,y.TransportError;var w=o((function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t={data:Buffer.alloc(0),dataLength:0,sequence:0};r.default=function(e,r){return{makeBlocks:function(t){var n,o,a=Buffer.concat([(n=t.length,o=Buffer.alloc(2),o.writeUInt16BE(n,0),o),t]),s=r-5,i=Math.ceil(a.length/s);a=Buffer.concat([a,Buffer.alloc(i*s-a.length+1).fill(0)]);for(var c=[],u=0;u<i;u++){var l=Buffer.alloc(5);l.writeUInt16BE(e,0),l.writeUInt8(5,2),l.writeUInt16BE(u,3);var d=a.slice(u*s,(u+1)*s);c.push(Buffer.concat([l,d]))}return c},reduceResponse:function(r,n){var o=r||t,a=o.data,s=o.dataLength,i=o.sequence;if(n.readUInt16BE(0)!==e)throw new C.TransportError("Invalid channel","InvalidChannel");if(5!==n.readUInt8(2))throw new C.TransportError("Invalid tag","InvalidTag");if(n.readUInt16BE(3)!==i)throw new C.TransportError("Invalid sequence","InvalidSequence");r||(s=n.readUInt16BE(5)),i++;var c=n.slice(r?5:7);return(a=Buffer.concat([a,c])).length>s&&(a=a.slice(0,s)),{data:a,dataLength:s,sequence:i}},getReducedResult:function(e){if(e&&e.dataLength===e.data.length)return e.data}}}}));n(w);var b=o((function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},n=(r.IIGenericHID=1,r.IIKeyboardHID=2,r.IIU2F=4,r.IICCID=8,r.IIWebUSB=16,{blue:{id:"blue",productName:"LedgerBlue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,blockSize:4096},nanoS:{id:"nanoS",productName:"LedgerNanoS",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,blockSize:4096},nanoX:{id:"nanoX",productName:"LedgerNanoX",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,blockSize:4096,bluetoothSpec:[{serviceUuid:"d973f2e0-b19e-11e2-9e96-0800200c9a66",notifyUuid:"d973f2e1-b19e-11e2-9e96-0800200c9a66",writeUuid:"d973f2e2-b19e-11e2-9e96-0800200c9a66"},{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572"}]}}),o={Blue:"blue","Nano S":"nanoS","Nano X":"nanoX"},a=Object.values(n),s=(r.ledgerUSBVendorId=11415,r.getDeviceModel=function(e){var r=n[e];if(!r)throw new Error("device '"+e+"' does not exist");return r},r.identifyUSBProductId=function(e){var r=a.find((function(r){return r.legacyUsbProductId===e}));if(r)return r;var t=e>>8;return a.find((function(e){return e.productIdMM===t}))},r.identifyProductName=function(e){var r=o[e];return a.find((function(e){return e.id===r}))},[]),i={};for(var c in n){var u=n[c],l=u.bluetoothSpec;if(l)for(var d=0;d<l.length;d++){var p=l[d];s.push(p.serviceUuid),i[p.serviceUuid]=i[p.serviceUuid.replace(/-/g,"")]=t({deviceModel:u},p)}}r.getBluetoothServiceUuids=function(){return s},r.getInfosForServiceUuid=function(e){return i[e.toLowerCase()]}}));n(b);b.IIGenericHID,b.IIKeyboardHID,b.IIU2F,b.IICCID,b.IIWebUSB,b.ledgerUSBVendorId,b.getDeviceModel,b.identifyUSBProductId,b.identifyProductName,b.getBluetoothServiceUuids,b.getInfosForServiceUuid;var D=o((function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var n=0,o=[],a=(r.log=function(e,r,t){var a={type:e,id:String(++n),date:new Date};r&&(a.message=r),t&&(a.data=t),function(e){for(var r=0;r<o.length;r++)try{o[r](e)}catch(e){console.error(e)}}(a)},r.listen=function(e){return o.push(e),function(){var r=o.indexOf(e);-1!==r&&(o[r]=o[o.length-1],o.pop())}});t.__ledgerLogsListen=a}));n(D);D.log,D.listen;var A=o((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isSupported=r.getFirstLedgerDevice=r.getLedgerDevices=r.requestLedgerDevice=void 0;var t,n,o,a=r.requestLedgerDevice=(t=i(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.usb.requestDevice({filters:c});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),s=r.getLedgerDevices=(n=i(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.usb.getDevices();case 2:return r=e.sent,e.abrupt("return",r.filter((function(e){return e.vendorId===b.ledgerUSBVendorId})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)});r.getFirstLedgerDevice=(o=i(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:if(!((r=e.sent).length>0)){e.next=5;break}return e.abrupt("return",r[0]);case 5:return e.abrupt("return",a());case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)});function i(e){return function(){var r=e.apply(this,arguments);return new Promise((function(e,t){return function n(o,a){try{var s=r[o](a),i=s.value}catch(e){return void t(e)}if(!s.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(i)}("next")}))}}var c=[{vendorId:b.ledgerUSBVendorId}];r.isSupported=function(){return Promise.resolve(!!navigator&&!!navigator.usb&&"function"==typeof navigator.usb.getDevices)}}));n(A);A.isSupported,A.getFirstLedgerDevice,A.getLedgerDevices,A.requestLedgerDevice;var I=o((function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),n=a(y),o=a(w);function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var r=e.apply(this,arguments);return new Promise((function(e,t){return function n(o,a){try{var s=r[o](a),i=s.value}catch(e){return void t(e)}if(!s.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(i)}("next")}))}}var i=function(e){function r(e,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return c.call(n),n.device=e,n.interfaceNumber=t,n.deviceModel=(0,b.identifyUSBProductId)(e.productId),n}var n,o,a,i;return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,e),t(r,[{key:"close",value:(i=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exchangeBusyPromise;case 2:return e.next=4,this.device.releaseInterface(this.interfaceNumber);case 4:return e.next=6,this.device.reset();case 6:return e.next=8,this.device.close();case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setScrambleKey",value:function(){}}],[{key:"request",value:(a=s(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.requestLedgerDevice)();case 2:return t=e.sent,e.abrupt("return",r.open(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"openConnected",value:(o=s(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.getLedgerDevices)();case 2:if(0!==(t=e.sent).length){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r.open(t[0]));case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"open",value:(n=s(regeneratorRuntime.mark((function e(t){var n,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.open();case 2:if(null!==t.configuration){e.next=5;break}return e.next=5,t.selectConfiguration(1);case 5:return e.next=7,t.reset();case 7:if(n=t.configurations[0].interfaces.find((function(e){return e.alternates.some((function(e){return 255===e.interfaceClass}))}))){e.next=10;break}throw new C.TransportInterfaceNotAvailable("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");case 10:return o=n.interfaceNumber,e.prev=11,e.next=14,t.claimInterface(o);case 14:e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(11),e.next=20,t.close();case 20:throw new C.TransportInterfaceNotAvailable(e.t0.message);case 21:return a=new r(t,o),s=function e(r){t===r.device&&(navigator.usb.removeEventListener("disconnect",e),a._emitDisconnect(new C.DisconnectedDevice))},navigator.usb.addEventListener("disconnect",s),e.abrupt("return",a);case 25:case"end":return e.stop()}}),e,this,[[11,16]])}))),function(e){return n.apply(this,arguments)})}]),r}(n.default);i.isSupported=A.isSupported,i.list=A.getLedgerDevices,i.listen=function(e){var r=!1;return(0,A.getFirstLedgerDevice)().then((function(t){if(!r){var n=(0,b.identifyUSBProductId)(t.productId);e.next({type:"add",descriptor:t,deviceModel:n}),e.complete()}}),(function(r){window.DOMException&&r instanceof window.DOMException&&18===r.code?e.error(new C.TransportWebUSBGestureRequired(r.message)):e.error(new C.TransportOpenUserCancelled(r.message))})),{unsubscribe:function(){r=!0}}};var c=function(){var e=this;this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this._disconnectEmitted=!1,this._emitDisconnect=function(r){e._disconnectEmitted||(e._disconnectEmitted=!0,e.emit("disconnect",r))},this.exchange=function(r){return e.exchangeAtomicImpl(s(regeneratorRuntime.mark((function t(){var n,a,s,i,c,u,l,d,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.channel,a=e.packetSize,(0,D.log)("apdu","=> "+r.toString("hex")),s=(0,o.default)(n,a),i=s.makeBlocks(r),c=0;case 5:if(!(c<i.length)){t.next=12;break}return(0,D.log)("hid-frame","=> "+i[c].toString("hex")),t.next=9,e.device.transferOut(3,i[c]);case 9:c++,t.next=5;break;case 12:u=void 0,l=void 0;case 14:if(u=s.getReducedResult(l)){t.next=23;break}return t.next=17,e.device.transferIn(3,a);case 17:d=t.sent,p=Buffer.from(d.data.buffer),(0,D.log)("hid-frame","<= "+p.toString("hex")),l=s.reduceResponse(l,p),t.next=14;break;case 23:return(0,D.log)("apdu","<= "+u.toString("hex")),t.abrupt("return",u);case 25:case"end":return t.stop()}}),t,e)})))).catch((function(r){if(r&&r.message&&r.message.includes("disconnected"))throw e._emitDisconnect(r),new C.DisconnectedDeviceDuringOperation(r.message);throw r}))}};r.default=i})),S=n(I),N=Object.freeze({default:S,__moduleExports:I});e.Btc=r,e.TransportWebUSB=N,Object.defineProperty(e,"__esModule",{value:!0})}));

window.Btc = NewLedger.Btc.default;
window.TransportWebUSB = NewLedger.TransportWebUSB.default;